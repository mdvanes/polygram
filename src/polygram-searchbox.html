<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymer/lib/elements/dom-repeat.html">
<!--<link rel="import" href="../bower_components/polymer-redux/polymer-redux.html">-->
<link rel="import" href="../bower_components/paper-styles/color.html">
<!--<link rel="import" href="redux-mixin.html"/>-->
<link rel="import" href="polygram-element-styles.html">
<!--<link rel="import" href="action.html">-->

<dom-module id="polygram-searchbox">
    <template>
        <style include="polygram-element-styles"></style>
        <style>
            table {
                border-collapse: collapse;
                width: 100%;
            }
            thead > tr {
                text-align: left;
            }
            tbody > tr:hover {
                background-color: var(--paper-blue-100);
                cursor: pointer;
            }
        </style>
        <div>
            <!--<h2>Search [[sourceName]]!</h2>-->
            <paper-input id="searchIAInput"
                         value="{{_searchIAInput}}"
                         label="Search" charcounter="true" maxlength="100">
                <iron-icon icon="close" slot="prefix"></iron-icon>
            </paper-input>
            <table>
                <thead>
                    <tr>
                        <th>Type</th>
                        <th>Index</th>
                        <th>Name</th>
                    </tr>
                </thead>
                <tbody>
                    <template is="dom-repeat" items="{{_searchResultsIAArr}}">
                        <tr>
                            <td>W</td>
                            <td>[[index]]</td>
                            <td id="[[item.title]]" on-click="_handleClick">[[item.title]]</td>
                        </tr>
                    </template>
                </tbody>
            </table>
            <iron-request id="xhr"></iron-request>
            <!--
             Without auto, call manually with:
              this.$.searchIARequest.generateRequest() in e.g. ready()
            -->
            <iron-ajax
                    auto
                    id="searchIARequest"
                    url="{{_searchIAUrl}}"
                    handle-as="json"
                    debounce-duration="500"
                    on-response="_searchIAHandler"></iron-ajax>
        </div>

    </template>

    <script>
        import PolygramSearchboxFactory from './PolygramSearchbox';
        const PolygramSearchbox = PolygramSearchboxFactory.create(Polymer);

        window.customElements.define(PolygramSearchbox.is, PolygramSearchbox);
    </script>
</dom-module>
